<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>密码重置</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .form-item { margin: 15px 0; }
        input { padding: 8px; width: 200px; }
        button { padding: 8px 15px; background: #007aff; color: white; border: none; border-radius: 4px; }
    </style>
</head>
<body>
    <h3>密码重置</h3>
    <div class="form-item">
        <label>邮箱：</label>
        <input type="email" id="emailInput" placeholder="请输入绑定的邮箱">
    </div>
    <div class="form-item">
        <label>验证码：</label>
        <input type="text" id="codeInput" placeholder="请输入验证码">
        <button onclick="sendCode()">发送验证码</button>
    </div>
    <div class="form-item">
        <label>新密码：</label>
        <input type="password" id="pwdInput" placeholder="请输入新密码">
    </div>
    <div class="form-item">
        <button onclick="confirmReset()">确认重置</button>
    </div>

    <script>
        // 接收 Cocos 传递的参数（如预填充的邮箱）
        function setEmailFromCocos(email) {
            document.getElementById('emailInput').value = email;
            alert('已从游戏获取邮箱：' + email);
        }

        // 发送验证码（可调用真实后端接口）
        function sendCode() {
            const email = document.getElementById('emailInput').value;
            if (!email) {
                alert('请输入邮箱！');
                return;
            }
            alert('验证码已发送至：' + email);
        }

        // 确认重置，回调结果给 Cocos
        function confirmReset() {
            const email = document.getElementById('emailInput').value;
            const code = document.getElementById('codeInput').value;
            const pwd = document.getElementById('pwdInput').value;

            if (!email || !code || !pwd) {
                alert('请填写完整信息！');
                return;
            }

            // 关键：调用 Cocos 注册的回调函数，传递重置结果
            if (window.cc && window.cc.callback) {
                window.cc.callback({
                    success: true,
                    email: email,
                    msg: '密码重置成功'
                });
            }
        }
    </script>
</body>
</html>